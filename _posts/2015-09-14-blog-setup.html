---
title: Blog documentation
series: blog-setup
category: blog-documentation
layout: post
date: 2015-09-14 17:00:45
tags: blog-docs
deactivateComments: true
---
<p>
This post is a brief description of the technical aspects of the
blog itself. It is not supposed to explain the setup of the blog 
in detail, it's rather just a list of links to the documentation that 
turned out to be useful. Target audience: myself.
</p>

<div class="backstage">
  <div>
    <h2> BACKSTAGE AREA </h2>
    <p>
    This page describes the usage of the blog software from
    author's point of view. It is probably not what you are 
    looking for. 
    </p>
    <p>
    You can of course look around if you like, it's 
    just not particularly interesting, unless you are trying to 
    setup a similar blog.
    </p>
  </div>
</div>

<p>
This blog is generated by <a href="https://jekyllrb.com/">Jekyll</a> and 
hosted on Github pages. 
</p>
<p>
For the comments, an external comment hosting service 
<a href="https://publishers.disqus.com/engage">Disqus Engage</a> is used.
</p>
<p>
No Jekyll-plugins are used. Instead, the following functionality has
been implemented using only Jekyll's Liquid engine: cut, tags, post-series,
auxiliary javascript and CSS files, generated pages for code snippets. These features are <em>not standard</em>, and they are not
documented anywhere else.
</p>

<!-- cut -->

<h2>Ruby, gem, bundler, jekyll</h2>
<p>
In order to build and test the blog locally, 
one needs a current Ruby version
(at the time of writing, GitHub requires at least 2.0.0,
see <a href="https://help.github.com/articles/using-jekyll-with-pages/#installing-jekyll">
this documentation</a>), and Jekyll itself.
</p>
<p>
Obtaining a current version of Ruby using the <code>apt</code>
package manager did not work so well: for some reason, <code>apt</code>
broke both Ruby and my TexLive installation. 
Ruby's version manager <a href="https://rvm.io/">RVM</a> worked much better.
After following the installation instructions for RVM, adding the
following lines to the <code>~/.bashrc</code>:
{% highlight bash %}
export PATH="$PATH:$HOME/.rvm/bin" # Add RVM to PATH for scripting
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"
{% endhighlight %}
and restarting the bash, one could install a current Ruby version by
issuing the command:
{% highlight bash %}
rvm install 2.2.3
rvm use 2.2.3 --default
{% endhighlight %}
Then, one could follow the instructions on <a href="https://help.github.com/articles/using-jekyll-with-pages/"> Github </a>, install <code>bundler</code>, and then install the current Jekyll version.
</p>

<p>
The basic structure of the blog is similar to what is described 
in <a href="http://learn.andrewmunsell.com/learn/jekyll-by-example/tutorial">this tutorial</a> (it seems to use an older
version of Bootstrap, but this is a minor problem). 
</p>
<p>
To serve the site locally, one has to issue the following command:
{% highlight bash %} 
  bundler exec jekyll serve --baseurl ''
{% endhighlight %}
The <code>baseurl</code> has to be adjusted because the site is 
served on <code>http://localhost:4000/</code>, not on
<code>http://localhost:4000/yourProjectName</code>, as it is the
case of Github project-pages.
Notice that Jekyll does not reload changes in <code>_config.yml</code> 
automatically. 
</p>

<h2>Post series</h2>
<p>
Tags and series have been implemented from scratch using the
filters provided by the Liquid engine.
</p>
<p>
To create a series of posts, simply add 
<code>series: mySeriesName</code> to the front matter of 
each post that is part of the series. The posts will be sorted chronologically, there is no possibility to assign an index 
explicitly.
</p>

<h2>Tags</h2>
<p>
Every post can be assigned a number of tags. 
Add the following line to the front matter:
{% highlight javascript %}
  tags: [foo, bar, baz]
{% endhighlight %}
These tags will appear as links under the post.
</p>

<h2>Comments</h2>
<p>
Comment functionality is provided by Disqus. 
In order to keep comment-thread identifiers completely 
independent from the URL, the slug, or the post title,
I decided to specify every thread-id manually. To specify
the id for the comment thread, add the following line
to the front matter:
{% highlight javascript %}
  commentsId: moreOrLessSensibleId12345
{% endhighlight %}
Furthermore, the variable <code>discusShortname</code> must be 
specified in the <code>_config.yml</code> (it will be sent to
Disqus as the <code>discus_shortname</code> parameter of their
script.
</p>
<p>
  To access Disqus' moderation/administration panel, 
  visit the page <code>https://your_discus_shortname.disqus.com/admin/moderate/</code>.
</p>
<p>
  To deactivate comments in a post, add
  <code>deactivateComments: true</code>
  to the front-matter.
</p>

<h2> Cut </h2>
<p>
The cut-feature is available. Just insert <code>&lt;!-- cut --&gt;</code>
anywhere in the post. Notice that there is a single space on each side
of the word "cut".
</p>

<h2>Additional javascript and css files</h2>
<p>
  It is possible to add auxiliary JS and CSS files,
  see a later separate blog post in this series.
</p>

<h2>Code snippets</h2>
<p>
  It is possible to generate pages for code snippets.
  Simply create a subdirectory in <code>codeSnippets</code>,
  add your source code files there, and create an <code>index.html</code>-file with a front-matter that looks like this:
  {% highlight javascript %}
---
title: Javascript + CSS tests
date: 2015-10-05 15:00
layout: codeSnippet
sourceCodeFiles: [[sierpinski.js, javascript], [yinyang.css, css]]
---
  {% endhighlight %}
  The first component of each entry should be the name of the source code file.
  The second component should be a language identifier that is understood by
  Liquid's <code>highlight</code> tag.
  The rest of the <code>index.html</code> can remain empty.

  To link the code-snippet page from a post, simply add something like this
  to the end of the post:
  {% highlight html %}
<hr>
<p>
Code for this post: <a href="{{ site.baseurl }}/codeSnippets/javascriptTest">
  sierpinski.js + yinyang.css
</a>
</p>
  {% endhighlight %}
  If the syntax-highlighting does not seem to work, check the 
  <code>_layouts/codeSnippet.html</code>, there is a long list of supported
  languages. Add some more if necessary.
</p>

<h2> Summary </h2>
To add a new post, create a <code>.html</code> or <code>.markdown</code>
file in the <code>_posts</code> directory, and begin with the following front matter:
{% highlight javascript %}
---
title: Human readable title
series: nameOfThePostSeries
tags: [foo, bar, baz]
category: test
commentsId: moreOrLessSensibleId12345
layout: post
date: 2015-09-14 17:30:45
---
{% endhighlight %}
Tags and category are optional. Date can be used to order multiple posts 
that were made the same day.